{"version":3,"sources":["sci/impl/load.cljc"],"mappings":"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","names":["sci.impl.load/handle-refer-all","the-current-ns","the-loaded-ns","include-sym?","rename-sym","only","referred","cljs.core/set","cljs.core.reduce","p__48257","vec__48258","cljs.core.nth","ns","k","v","and__4251__auto__","cljs.core/Symbol","cljs.core/not","cljs.core/contains?","cljs.core.assoc","p__48276","map__48277","cljs.core/--destructure-map","as","cljs.core.get","refer","rename","exclude","use","sci.impl.load/handle-require-libspec-env","_ctx","env","current-ns","lib-name","_parsed-libspec","cljs.core.get_in","cljs.core/assoc-in","sym","or__4253__auto__","cljs.core/identity","excludes","cljs.core/constantly","cljs.core/keyword-identical?","cljs.core/sequential?","temp__5751__auto__","vec__48320","_k","cljs.core/find","js/Error","temp__5753__auto__","on-loaded","G__48329","cljs.core/meta","G__48352","sci.impl.load/add-loaded-lib","lib","cljs.core.swap_BANG_","cljs.core/update","loaded-libs","cljs.core.conj","sci.impl.load/handle-require-libspec","ctx","opts","cljs.core/deref","env*","cnn","sci.impl.vars/current-ns-name","as-alias","cljs.core/reset!","map__48368","reload","reload-all","namespaces","reload*","loading","cljs.core/nat-int?","sci.impl.utils.throw_error_with_location","lib-emphasized","cljs.core.replace","clojure.string.join","load-fn","map__48385","file","source","G__48383","cljs.core.update","e48389","sci.impl.vars/push-thread-bindings","sci.impl.vars/pop-thread-bindings","sci.impl.vars/current-ns","sci.impl.vars/current-file","fexpr__48394","sci.impl.utils/eval-string*","e","cljs.core/dissoc","var_args","args__4870__auto__","len__4864__auto__","i__4865__auto__","argseq__4871__auto__","cljs.core/IndexedSeq","sci.impl.load/load-lib","seq48400","G__48401","cljs.core/first","cljs.core/next","G__48402","G__48403","self__4851__auto__","prefix","options","cljs.core/name","cljs.core.symbol","cljs.core.apply","cljs.core/hash-map","sci.impl.load/prependss","x","coll","cljs.core/cons","cljs.core.concat","sci.impl.load/libspec?","cljs.core/vector?","cljs.core/second","cljs.core/Keyword","sci.impl.load/load-libs","kw","args","args*","flags","cljs.core.filter","cljs.core/keyword?","cljs.core.interleave","cljs.core.repeat","cljs.core/complement","supported","unsupported","cljs.core/seq","cljs.core.remove","cljs.core/str","cljs.core.interpose","seq__48440","chunk__48441","count__48442","i__48443","cljs.core/chunked-seq?","c__4679__auto__","cljs.core/chunk-first","cljs.core/chunk-rest","cljs.core/count","arg","vec__48536","seq__48537","first__48538","vec__48576","seq__48577","first__48578","seq__48539","chunk__48540","count__48541","i__48542","seq__48584","chunk__48585","count__48586","i__48587","sci.impl.load/eval-require","seq48617","G__48618","cljs.core/vreset!","sci.impl.utils/eval-require-state","sci.impl.load/eval-use","seq48643","G__48644","sci.impl.utils/eval-use-state","sci.impl.load/eval-refer-clojure","exprs","ns-sym","vec__48675","G__48678","cljs.core.update_in","cljs.core.fnil","cljs.core/into","other-ns","other-vars","cljs.core/select-keys","cljs.core/merge","p__48693","vec__48694","acc","original-name","new-name","cljs.core/conj","cljs.core/nnext","sci.impl.load/eval-refer*","filters","fs","public-keys","cljs.core/symbol?","cljs.core/keys","to-do","cljs.core._EQ_","_","sci.impl.load/eval-refer","seq48732","G__48733","G__48734","sci.impl.utils/eval-refer-state"],"sourcesContent":["(ns sci.impl.load\n  {:no-doc true}\n  (:require\n   [clojure.string :as str]\n   [sci.impl.utils :as utils :refer [throw-error-with-location\n                                     kw-identical?]]\n   [sci.impl.vars :as vars]))\n\n(defn handle-refer-all [the-current-ns the-loaded-ns include-sym? rename-sym only]\n  (let [referred (:refers the-current-ns)\n        only (when only (set only))\n        referred (reduce (fn [ns [k v]]\n                           (if (and (symbol? k) (include-sym? k)\n                                    (or (not only)\n                                        (contains? only k)))\n                             (assoc ns (rename-sym k) v)\n                             ns))\n                         referred\n                         the-loaded-ns)]\n    (assoc the-current-ns :refers referred)))\n\n(defn handle-require-libspec-env\n  [_ctx env current-ns the-loaded-ns lib-name\n   {:keys [:as :refer :rename :exclude :only :use] :as _parsed-libspec}]\n  (let [the-current-ns (get-in env [:namespaces current-ns]) ;; = ns-data?\n        the-current-ns (if as (assoc-in the-current-ns [:aliases as] lib-name)\n                           the-current-ns)\n        rename-sym (if rename (fn [sym] (or (rename sym) sym))\n                       identity)\n        include-sym? (if exclude\n                       (let [excludes (set exclude)]\n                         (fn [sym]\n                           (not (contains? excludes sym))))\n                       (constantly true))\n        the-current-ns\n        (cond refer\n              (cond (or (kw-identical? :all refer)\n                        use)\n                    (handle-refer-all the-current-ns the-loaded-ns include-sym? rename-sym nil)\n                    (sequential? refer)\n                    (let [referred (:refers the-current-ns)\n                          referred (reduce (fn [ns sym]\n                                             (if (include-sym? sym)\n                                               (assoc ns (rename-sym sym)\n                                                      (if-let [[_k v] (find the-loaded-ns sym)]\n                                                        v\n                                                        (throw (new #?(:clj Exception :cljs js/Error)\n                                                                    (str sym \" does not exist\")))))\n                                               ns))\n                                           referred\n                                           refer)]\n                      (assoc the-current-ns :refers referred))\n                    :else (throw (new #?(:clj Exception :cljs js/Error)\n                                      (str \":refer value must be a sequential collection of symbols\"))))\n              use (handle-refer-all the-current-ns the-loaded-ns include-sym? rename-sym only)\n              :else the-current-ns)\n        env (assoc-in env [:namespaces current-ns] the-current-ns)]\n    (when-let [on-loaded (some-> the-loaded-ns :obj meta :sci.impl/required-fn)]\n      (on-loaded {}))\n    env))\n\n(defn add-loaded-lib [env lib]\n  (swap! env update :loaded-libs (fn [loaded-libs]\n                                   (if (nil? loaded-libs)\n                                     #{lib}\n                                     (conj loaded-libs lib))))\n  nil)\n\n(defn handle-require-libspec\n  [ctx lib opts]\n  (let [env* (:env ctx)\n        env @env* ;; NOTE: loading namespaces is not (yet) thread-safe\n        cnn (vars/current-ns-name)]\n    (if-let [as-alias (:as-alias opts)]\n      (reset! env* (handle-require-libspec-env ctx env cnn nil lib {:as as-alias}))\n      (let [{:keys [:reload :reload-all]} opts\n            namespaces (get env :namespaces)\n            reload* (or reload reload-all (:reload-all ctx))]\n        (if-let [the-loaded-ns (when-not reload* (get namespaces lib))]\n          (let [loading (:loading ctx)]\n            (if (and loading\n                     (not (contains? (:loaded-libs env) lib))\n                     (nat-int? #?(:clj (.indexOf ^clojure.lang.PersistentVector loading lib)\n                                  :cljs (.indexOf loading lib))))\n              (throw-error-with-location\n               (let [lib-emphasized (str \"[ \" lib \" ]\")\n                     loading (conj loading lib)\n                     loading (replace {lib lib-emphasized} loading)]\n                 (str \"Cyclic load dependency: \" (str/join \"->\" loading)))\n               lib)\n              (reset! env* (handle-require-libspec-env ctx env cnn the-loaded-ns lib opts))))\n          (if-let [load-fn (:load-fn env)]\n            (if-let [{:keys [:file :source]} (load-fn {:namespace lib\n                                                       :reload (or reload reload-all)})]\n              (do\n                ;; (.println System/err \"source\")\n                ;; (.println System/err source)\n                (let [ctx (-> ctx\n                              (assoc :bindings {})\n                              (assoc :reload-all reload-all)\n                              (update :loading (fn [loading]\n                                                 (if (nil? loading)\n                                                   [lib]\n                                                   (conj loading lib)))))]\n                  (try (vars/with-bindings\n                         {vars/current-ns @vars/current-ns\n                          vars/current-file file}\n                         (@utils/eval-string* ctx source))\n                       (catch #?(:clj Exception :cljs js/Error) e\n                         (swap! env* update :namespaces dissoc lib)\n                         (throw e))))\n                (swap! env* (fn [env]\n                              (let [namespaces (get env :namespaces)\n                                    the-loaded-ns (get namespaces lib)]\n                                (handle-require-libspec-env ctx env cnn\n                                                            the-loaded-ns\n                                                            lib opts)))))\n              (or (when reload*\n                    (when-let [the-loaded-ns (get namespaces lib)]\n                      (reset! env* (handle-require-libspec-env ctx env cnn the-loaded-ns lib opts))))\n                  (throw (new #?(:clj Exception :cljs js/Error)\n                              (str \"Could not find namespace: \" lib \".\")))))\n            (throw (new #?(:clj Exception :cljs js/Error)\n\n                        (str \"Could not find namespace \" lib \".\")))))\n        (add-loaded-lib env* lib)\n        nil))))\n\n(defn load-lib [ctx prefix lib & options]\n  (when (and prefix (pos? (.indexOf (name lib) #?(:clj (int \\.)\n                                                  :cljs \\.))))\n    (throw-error-with-location (str \"Found lib name '\" (name lib) \"' containing period with prefix '\"\n                                    prefix \"'.  lib names inside prefix lists must not contain periods\")\n                               lib))\n  (let [lib (if prefix (symbol (str prefix \\. lib)) lib)\n        opts (apply hash-map options)]\n    (handle-require-libspec ctx lib opts)))\n\n(defn- prependss\n  \"Prepends a symbol or a seq to coll\"\n  [x coll]\n  (if (symbol? x)\n    (cons x coll)\n    (concat x coll)))\n\n(defn- libspec?\n  \"Returns true if x is a libspec\"\n  [x]\n  (or (symbol? x)\n      (and (vector? x)\n           (or\n            (nil? (second x))\n            (keyword? (second x))))))\n\n(defn- load-libs\n  \"Loads libs, evaling libspecs, prefix lists, and flags for\n  forwarding to load-lib\"\n  [ctx kw args]\n  (let [args* (cons kw args)\n        flags (filter keyword? args*)\n        opts (interleave flags (repeat true))\n        args* (filter (complement keyword?) args*)]\n    ;; check for unsupported options\n    (let [supported #{:as :reload :reload-all :require :use :verbose :refer}\n          unsupported (seq (remove supported flags))]\n      (when unsupported\n        (throw-error-with-location (apply str \"Unsupported option(s) supplied: \"\n                                          (interpose \\, unsupported))\n                                   ;; best effort location\n                                   args)))\n    ;; check a load target was specified\n    (when-not (seq args*)\n      (throw-error-with-location \"Nothing specified to load\"\n                                 args))\n    (doseq [arg args*]\n      (if (libspec? arg)\n        (apply load-lib ctx nil (prependss arg opts))\n        (let [[prefix & args*] arg]\n          (when (nil? prefix)\n            (throw-error-with-location \"prefix cannot be nil\"\n                                       args))\n          (doseq [arg args*]\n            (apply load-lib ctx prefix (prependss arg opts))))))))\n\n(defn eval-require\n  [ctx & args]\n  (load-libs ctx :require args))\n\n(vreset! utils/eval-require-state eval-require)\n\n(defn eval-use\n  [ctx & args]\n  (load-libs ctx :use args))\n\n(vreset! utils/eval-use-state eval-use)\n\n(defn eval-refer-clojure [ctx exprs]\n  (let [ns-sym 'clojure.core]\n    (loop [exprs exprs]\n      (when exprs\n        (let [[k v] exprs]\n          (case k\n            :exclude\n            (swap! (:env ctx)\n                   (fn [env]\n                     (let [cnn (vars/current-ns-name)]\n                       (update-in env [:namespaces cnn :refer ns-sym :exclude]\n                                  (fnil into #{}) v))))\n            :only\n            (swap! (:env ctx)\n                   (fn [env]\n                     (let [cnn (vars/current-ns-name)\n                           other-ns (get-in env [:namespaces ns-sym])\n                           other-vars (select-keys other-ns v)]\n                       ;; TODO: this is wrong, don't merge these vars into the current namespace\n                       (update-in env [:namespaces cnn]\n                                  merge other-vars))))\n            :rename\n            (swap! (:env ctx)\n                   (fn [env]\n                     (let [cnn (vars/current-ns-name)\n                           namespaces (:namespaces env)\n                           the-current-ns (get namespaces cnn)\n                           other-ns (get-in env [:namespaces ns-sym])\n                           the-current-ns\n                           (reduce (fn [acc [original-name new-name]]\n                                     (-> acc\n                                         (assoc-in [:refers new-name] (get other-ns original-name))\n                                         (update-in [:refer ns-sym :exclude] (fnil conj #{}) original-name)))\n                                   the-current-ns\n                                   v)]\n                       (assoc-in env [:namespaces cnn] the-current-ns)))))\n          (recur (nnext exprs)))))))\n\n(defn eval-refer* [env ns-sym filters]\n  env\n  (let [cnn (vars/current-ns-name)\n        namespaces (:namespaces env)\n        ns (or (get namespaces ns-sym)\n               (throw (new #?(:clj Exception :cljs js/Error)\n                           (str \"No namespace: \" ns-sym))))\n        fs (apply hash-map filters)\n        public-keys (filter symbol? (keys ns))\n        rename (or (:rename fs) {})\n        exclude (set (:exclude fs))\n        to-do (if (= :all (:refer fs))\n                public-keys\n                (or (:refer fs) (:only fs) public-keys))\n        _ (when (and to-do (not (sequential? to-do)))\n            (throw (new #?(:clj Exception :cljs js/Error)\n                        \":only/:refer value must be a sequential collection of symbols\")))\n        the-current-ns (get namespaces cnn)\n        referred (:refers the-current-ns)\n        referred (reduce (fn [referred sym]\n                           (if-not (exclude sym)\n                             (let [v (get ns sym)]\n                               (when-not v\n                                 (throw (new #?(:clj java.lang.IllegalAccessError\n                                                :cljs js/Error)\n                                             ;; TODO: handle private vars\n                                             (if false ;; (get (ns-interns ns) sym)\n                                               (str sym \" is not public\")\n                                               (str sym \" does not exist\")))))\n                               (assoc referred (or (rename sym) sym) v ))\n                             referred))\n                         referred\n                         to-do)\n        the-current-ns (assoc the-current-ns :refers referred)\n        namespaces (assoc namespaces cnn the-current-ns)\n        env (assoc env :namespaces namespaces)]\n    env))\n\n(defn eval-refer\n  \"The function equivalent of :refer is handled differently than what we\n  did before (this is more like what Clojure itself does.) For\n  referring clojure.core we still use the old code.\"\n  [ctx ns-sym & filters]\n  (if (= 'clojure.core ns-sym)\n    (eval-refer-clojure ctx filters)\n    (swap! (:env ctx) eval-refer* ns-sym filters))\n  nil)\n\n(vreset! utils/eval-refer-state eval-refer)\n"]}